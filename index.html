<!DOCTYPE html>
<html>
    <head>
    <!--
        Customize the content security policy in the meta tag below as needed. Add 'unsafe-inline' to default-src to enable inline JavaScript.
        For details, see http://go.microsoft.com/fwlink/?LinkID=617521
    -->
        <!--<meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *"> -->
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
        <link rel="stylesheet" type="text/css" href="css/index.css">
        <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css" />
        <link href="css/app.css" rel="stylesheet" />
        <link href="css/themes/1/challenge-app1.min.css" rel="stylesheet" />
        <link href="css/themes/1/jquery.mobile.icons.min.css" rel="stylesheet" />
        <link href="css/jquery.mobile.structure-1.4.5.min.css" rel="stylesheet" />


        <title>MobileApp</title>
    </head>
    <body>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="scripts/platformOverrides.js"></script>
        <script type="text/javascript" src="scripts/index.js"></script>
        <!-- <script src="scripts/ewa.js"></script> -->
        <script src="scripts/jquery-1.8.0.min.js"></script>
        <script src="scripts/jquery.mobile-1.4.5.min.js"></script>


        <div data-role="page" id="pageMain">
            <div data-role="header" class="header">
                <h1 id="app-title">Challenge App</h1>
            </div>
            <div id="divMain" data-role="main" class="ui-content">
                <h2 class="mc-text-center">Welcome!</h2>
                <a href="#pageAbout" class="ui-btn ui-btn-b ui-corner-all">About...</a>
                <p class="mc-text-center"><b>Existing Users</b></p>
                <a href="#dlgSignIn" class="ui-btn ui-btn-b ui-corner-all" >Sign In</a>
                <p class="mc-text-center"><b>Don't have an account?</b></p>
                <a href="#dlgSignUp" class="ui-btn ui-btn-b ui-corner-all">Sign Up</a>
            </div>
            <footer data-role="footer" data-position="fixed">
                <p>&copy; Ewa Kołodziejczyk Łukasz Kępa Kornel Kawulok 2017</p>
            </footer>
        </div>

        <div data-role="page" id="pageAbout">
            <div data-role="header" class="header">
                <h1 id="app-title">Challenge App</h1>
            </div>
            <div id="divMain" data-role="main" class="mc-text-center">
                <h1 class="mc-text-center"> Challenge App</h1>
<br>
App aim: 
<br>   
The aim of the application is to compete with other users in the field challenges, involving the movement between the specified points on the map.
<br><br>
App description:
<br>
Challenge App is an application that challenges your siblings, friends or colleagues. The application is like outdoor game, close to ‘Podchody’ game, which is associated with childhood of everyone. The user adds the choice coordinates, which his opponent have to visit later in the correct order. If user want to encourage his opponent to challenge, he can add information about a reward, or appropriately mobilize him. To better reflect the climate of field games, the application does not tell the user the current location, but using geolocation tells him  about the distance to the next point on the map. Scams are not possible because the competitor will win challenge only if he visits all the map points in the correct order. After all, the competitor should inform the user that he has completed the task. In return he will have to give him beer, coffee or a delicious cake!
<br><br>
Authors' personal data:<br>
- Ewa Kołodziejczyk [*TEAM MANAGER*], ekolodziejczyk@gmail.com<br>
- Łukasz Kępa, lkepa@gmail.com<br>
- Kornel Kawulok, kkawulok@gmail.com<br>
                <a href="#pageMain" class="ui-btn ui-btn-inline ui-corner-all ui-shadow ui-btn-b mc-top-margin-1-5">Ok</a>
            </div>
            <footer data-role="footer" data-position="fixed">
                <p>&copy; Ewa Kołodziejczyk Łukasz Kępa Kornel Kawulok 2017</p>
            </footer>
        </div>

        <div data-role="page" data-dialog="true" id="dlg-right-credentials">
            <div data-role="header">
        <a href="#pageMain" data-direction="reverse" class="ui-btn-left ui-btn  ui-btn-icon-notext ui-corner-all ui-icon-back">Back</a>
                <h3>Challenge App</h3>
                <p class="mc-top-margin-1-5">If you are ready make a choice you must click to the right-hand or left-hand corner</p>
                <a href="#popupNested" data-rel="popup" class="ui-btn-right ui-btn ui-btn-icon-notext ui-corner-all ui-icon-bullets" data-transition="pop"></a>
                    <div data-role="popup" id="popupNested"> <!-- popup within a popup, the first popup to remain open so you can return to it from the second one (the  plugin for jQM) -->
                    <div data-role="collapsibleset" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d" style="margin:0; width:250px;">
                        <div data-role="collapsible" data-inset="false"> <!-- HAMBURGER -->
                            <h3>Challenge App</h3>
                                <ul data-role="listview">
                                    <li><a href="#dlgNazwa">Create challenge</a></li>
                                    <li><a href="#dlgLista">Take the challenge</a></li>
                                </ul>
                        </div><!-- /collapsible -->
                    </div><!-- /collapsible set -->
                </div><!-- /popup -->
           </div> <!--content-->
        </div> <!--page -->

        
        <div data-role="page" id="dlgSignIn">
            <div data-role="header">
                <h1>Challenge App</h1>
            </div><!-- /header -->
            <div id="divMain" class="ui-content">
                <h3 class="mc-text-center">Sign In</h3>
                <label class="mc-text-center" for="txt-email">E-mail Address</label>
                <input type="text" name="txt-email" id="txt-email" value=""><br><br>
                <label class="mc-text-center" for="txt-password">Password</label>
                <input type="password" name="txt-password" id="txt-password" value="">
                <fieldset data-role="controlgroup">
                    <input type="checkbox" name="chck-rememberme" id="chck-rememberme" checked="">
                    <label class="mc-text-center" for="chck-rememberme">Remember me</label>
                </fieldset>
                <a href="#dlg-invalid-credentials" data-rel="popup" data-transition="pop" data-position-to="window" id="btn-submit" class="ui-btn ui-btn-b ui-corner-all mc-top-margin-1-5">Submit</a>

                    <div data-role="popup" id="dlg-invalid-credentials" data-dismissible="false" style="max-width:400px;">
                    <div role="main" class="ui-content">
                        <h3 class="mc-text-center">You enter the right credentials</h3>
                        <div class="mc-text-center"><a href="#dlg-right-credentials" data-direction="reverse" class="ui-btn ui-corner-all ui-shadow ui-btn-b mc-top-margin-1-5">Click me</a></div>
                    </div>
                </div>
            </div><!-- /content -->
        </div><!-- /page -->

        <div data-role="page" id="dlgSignUp">
                <div data-role="header">
                    <h1>Challenge App</h1>
                </div>
                    <div role="main" class="ui-content">
                        <h3 class="mc-text-center">Sign Up</h3>
                            <label class="mc-text-center" for="txt-first-name">First Name</label>
                            <input type="text" name="txt-first-name" id="txt-first-name" value=""><br><br>
                            <label class="mc-text-center" for="txt-last-name">Last Name</label>
                            <input type="text" name="txt-last-name" id="txt-last-name" value=""><br><br>
                            <label class="mc-text-center" for="txt-email">e-Mail Address</label>
                            <input type="text" name="txt-email" id="txt-email" value=""><br><br>
                            <label class="mc-text-center" for="txt-password">Password</label>
                            <input type="password" name="txt-password" id="txt-password" value=""><br><br>
                            <label class="mc-text-center" for="txt-password-confirm">Confirm password</label>
                            <input type="password" name="txt-password-confirm" id="txt-password-confirm" value=""><br><br>
                            <a href="#dlg-sign-up-sent" data-rel="popup" data-transition="pop" data-position-to="window" id="btn-submit" class="ui-btn ui-btn-b ui-corner-all mc-top-margin-1-5">Submit</a>
                    <div data-role="popup" id="dlg-sign-up-sent" data-dismissible="false" style="max-width:400px;">
                        <div data-role="header"> <!-- do sprawdzenia -->
                            <h1>Almost done...</h1>
                        </div>
                          <div role="main" class="ui-content">
                                <h3>Confirm Your Email Address</h3>
                                <p>We sent you an email with instructions on how to confirm your email address. Please check your inbox and follow the instructions in the email</p>
                            <div class="mc-text-center"><a href="#dlgSignIn" class="ui-btn ui-corner-all ui-shadow ui-btn-b mc-top-margin-1-5">OK</a></div>  
              
                        </div>
                    </div>
                    </div><!-- /content -->
        </div><!-- /page -->


        <div data-role="page" id="pageOne">
            <div data-role="header" class="header">
            <h1 id="app-title">Challenge App</h1>
            </div>
               <div id="mainOne" data-role="main" class="ui-content">
                <a href="#dlgNazwa" class="ui-btn" >Create challenge</a>
                <a href="#dlgLista" class="ui-btn">Take the challenge</a>
            </div>
        </div>

        <div data-role="page" data-dialog="true" id="dlgNazwa">
            <div id="divMain" class="ui-content">
                <form action="#pageCreate">
                    <h3 class="mc-text-center" for="nazwaChallenge">Name your challenge</h3>
                    <input id="nazwaChallenge" name="nazwaChallenge" required onchange="spanName.innerText=nazwaChallenge.value" /> 
                    <a href="#pageCreate" class="ui-btn ui-btn-inline ui-corner-all ui-shadow ui-btn-b mc-top-margin-1-5" data-icon="plus"><center>Ok</center></a>
                    <a href="#pageMain" class="ui-btn ui-btn-inline ui-corner-all ui-shadow ui-btn-b mc-top-margin-1-5" data-icon="home">Cancel</a>
                </form>
            </div>
        </div>

        <script>
            function dlgAddClick() { <!-- FUNKCJE JAVASCRIPTOWE, pobiera z tablicy Array, koordynaty i przekształca je na kod html, pobiera je i przekształca na listę w html -->
                sInnHtml = listaPktCreate.innerHTML; //  innerHTML retrieves and sets content in HTML
                sInnHtml += "<li>"
                sInnHtml += addPointDescr.value; <!-- ta wartosc jest przenoszona do send -->
                sInnHtml += " ("
                sInnHtml += addPointGPS.innerText; // innerText retrieves and sets the content of the tag as plain text, zamienia to co w jakimś polu na tekst
                sInnHtml += ")</li> <br>"
                listaPktCreate.innerHTML = sInnHtml;
                }
        </script>

        
        <div data-role="page" data-dialog="true" id="dlgAddPoint"> <!-- okienko do pobierania punktów -->
                <div id="divMain" class="ui-content">
                <h3 class="mc-text-center">Add point</h3>
                <form>
                    <p class="mc-text-center"><b>Current GPS value</b></p>
                    <div class="mc-text-center" id="addPointGPS">....</div> <!-- kropki jak nie ma lokalizacji -->
                    <h3 class="mc-text-center" for="addPointDescr">Description</h3>
                    <input id="addPointDescr" name="addPointDescr" required  />
                    <a href="#pageCreate" id="OKgps" class="ui-btn ui-btn-inline ui-corner-all ui-shadow ui-btn-b mc-top-margin-1-5" onclick="dlgAddClick()"><center>Ok</center></a> <!-- po kliku punkty sie gromadza -->
                    <a href="#pageCreate" class="ui-btn ui-btn-inline ui-corner-all ui-shadow ui-btn-b mc-top-margin-1-5">Cancel</a>
                </form>
            </div>
        </div>

        
        <script>
            <!--function dlgCrtSend() { <!-- ta funkcja wyswietla zbiorczo informacje o czelendzu -->
                // sTxt = "Challenge: " + nazwaChallenge.value + "\n";
                // sTxt += listaPktCreate.innerText;
                // dlgListaSendBody.value = sTxt; // fill textarea dlgListaSend
   
   // }-->
	
	function dlgCrtSend() { <!-- ta funkcja wyswietla zbiorczo informacje o czelendzu -->
                sTxt = "Challenge v0.1, " + nazwaChallenge.value + "\n";
                sTxt += listaPktCreate.innerText;
                //alert(sTxt);
                dlgListaSendBody.value = sTxt;
				
				//Dodaje do LocalStorage liste z okienka ((Z EDYTOWAĆ FORMAT )
				localStorage.setItem('challenge', dlgListaSendBody.value);
				
   
    }


            function dlgGetGPS() { <!-- funkcja wypelniajaca koordynate zamiast kropek-->
                //Call the Cordova Geolocation API This initiates an asynchronous request to detect the user's position, and queries the positioning hardware to get up-to-date information. When the position is determined, the defined callback function is executed. 

                navigator.geolocation.getCurrentPosition(onGetLocationSuccess); // .getCurrentPosition() method is used to get the current position of the device.
                OKgps.disabled = true;

            }

            function onGetLocationSuccess(position) { <!-- funkcja której argumentem są koordynaty -->
                //Retrieve the location information from the position object
                var latitude = position.coords.latitude; // a double representing the position's latitude in decimal degrees. POBIERA SZEROKOSC
                var longitude = position.coords.longitude; // a double representing the position's longitude in decimal degrees. POBIERA DŁUGOSC
                addPointGPS.innerText = latitude + "," + longitude;

            } /* This code uses the device's geolocation capability to get the latitude and longitude of the device's location. It then uses that information to query the App for current conditions for the current location. */
			
			function filtrKoordynat(str){ <!-- jak przekleisz tekst czelendza z gmaila, to usuwa wszystkie znaki ktore nie sa koorynatami, zostawia 0-9, przecinek , kropka,slasz enter -->
			  objReg = /[1234567890,.\n]/;
			  var arr = str.split("");
			  var str_return = "";
			  for ( var i=0; i<arr.length; i++){
				if ( arr[i].match(objReg) ){
				  str_return += arr[i];
				}
			  }
			  return str_return;
			}
			
			
        </script>
		
		
		
		

        <div data-role="page" id="pageCreate">
            <div data-role="header" class="header">
                <h1 id="app-title">Challenge App</h1>
            </div>
            <div id="divMain" data-role="main" class="ui-content">
                <h3>Challenge: <span id="spanName"></span></h3>
                <p>Points of challenge</p>
                <ol id="listaPktCreate">
                </ol>
                <form>
                    <a href="#dlgAddPoint" class="ui-btn ui-btn-inline ui-corner-all ui-shadow ui-btn-b mc-top-margin-1-5" onclick="dlgGetGPS()">Add point</a>
                    <a href="#pageMain" class="ui-btn ui-btn-inline ui-corner-all ui-shadow ui-btn-b mc-top-margin-1-5">Cancel</a>
                    <a href="#dlgListaSend" class="ui-btn ui-btn-inline ui-corner-all ui-shadow ui-btn-b mc-top-margin-1-5" onclick="dlgCrtSend()">Ok</a>
                </form>

            </div>
            <footer data-role="footer" data-position="fixed">
                <h4>&copy; Ewa Kołodziejczyk Łukasz Kępa Kornel Kawulok 2017</h4>
            </footer>
        </div>


            <div data-role="page" data-dialog="true" id="dlgListaSend">
            <div id="divMain" class="ui-content">
                <a data-rel="back" class="ui-btn-left ui-btn  ui-btn-icon-notext ui-corner-all ui-icon-back">Back</a>
                <form>
                    <h3 class="mc-text-center" for="dlgListaSendBody">Send this to friend</h3>
                    <textarea id="dlgListaSendBody" name="dlgListaSendBody" required rows="6"></textarea> <!-- wyswietla sie wszystko co wczesniej zostalo napisane w polu do wysylania -->
					Frend's mail:
					<textarea id="mailkolegi" name="mailkolegi" required rows="1"></textarea> <!-- to jest  --><!-- zamiana tekstu wczensiej w odnośniku / tworzy ofosnik do przegladarki, gdzie wszystko sie wkleja w odpowednie miejsca, np mail do maila nazwa czelendza  odpwoednie miejsce, liste punktów koordynate																														wartosci heksadecymalne entera,  -->
					<input type="button" class="ui-btn ui-btn-inline ui-corner-all ui-shadow ui-btn-b mc-top-margin-1-5" onclick="location.href=&quot;mailto:&quot;+document.getElementById(&quot;mailkolegi&quot;).value+&quot;?subject=Nowe wyzwanie: &quot;+document.getElementById(&quot;nazwaChallenge&quot;).value+&quot;&body=&quot;+document.getElementById(&quot;listaPktCreate&quot;).innerText+'%0D%0A'+'%0D%0A'+&quot;Skopiuj powyższy tekst i wklej na stronie: https://ewakolodziejczyk.github.io/MobileApp/ &quot; " value="Send">
                    <a href="#pageMain" class="ui-btn ui-btn-inline ui-corner-all ui-shadow ui-btn-b mc-top-margin-1-5"><center>Home</center></a>
					
				</form>
            </div> <!-- /content -->
        </div> <!--/ page -->

        

        <!-- 
Amstedam, Londyn, Paryz
51.5287718,-0.2416818
48.8585195,2.0673762
52.3742807,4.6184359
Wieliczka, Kraków, Zabierzów
49.986111,20.061667
50.061389,19.938333
50.117222,19.799722
-->
        <script>

            var aPkt = new Array(); //tablica kolejnych punktów do zaliczenia (typ:google.marker)
            var iCurrCheckPoint; //numer aktualnego punktu (index do aPkt)
            var iMaxCheckPoint; //liczba elementów w aPkt
            var oMap; // mapa - obiekt google
			//var wysokosc = Math.max(parseInt(document.documentElement.clientHeight), parseInt(document.documentElement.scrollHeight);

            function initMap() {
                
				//Pobieranie danych jeśli jest LocalStorage to zawsze z niego
				//Jeśli nie to bierze z ramki
				var sTxt2 = localStorage.getItem('challenge');
				var sTxt;
				if(sTxt2 != null && sTxt2.length > 0) {
				sTxt = sTxt2;
				}
				else
				{
                var sTxt = filtrKoordynat(punktyLista.value);
				}
                //var aArr = sTxt.split("\n");
		 var aArr = sTxt.split("\n");
                //if(aArr.length<2) return; jak jest jedna zmienna to się kończy robić
                
            
                
                // liczymy srednia - czyli srodek mapki
                dLat=0; dLng=0;  iMaxCheckPoint=0; <!-- zainicjowanie zmeinnych -->
                for(i=0; i<aArr.length; i++)
                {
                    var sWsp = aArr[i]
                    var aWsp=sWsp.split(",")
                    if(aWsp.length==2)
                     {
                     itLat=parseFloat(aWsp[0]); <!-- metoda parsowania z floata -->
                     itLng=parseFloat(aWsp[1]);
                     
                     dLat+=itLat;
                     dLng+=itLng;
                     iMaxCheckPoint++;
                     
                     }
                }

                 dLat/= iMaxCheckPoint; //Srednia
                 dLng/= iMaxCheckPoint;

                var pSrodek = {lat: dLat, lng: dLng};
                
                // wyliczanie poziomu zoom (wedle rozrzucenia punktow) zeby wszystie punkty zmeiscily sie na mapie
                 iMaxDiffLat = 0; // różnica pomiędzy kolejnymi punktami - diff-różnica
                 iMaxDiffLng = 0;
                for(i=0; i<aArr.length; i++)
                {
                     var sWsp = aArr[i]
                     var aWsp=sWsp.split(",")
                     if(aWsp.length==2)
                     {
                     itLat=Math.abs(parseFloat(aWsp[0])-dLat); <!-- wartosc ujemna moze byc, wiec to wartosc bezwzgledn -->
                     // bedzie blad liczenia gdy punkty sa -180 i +180 dlugosci geogr
                     itLng=Math.abs(parseFloat(aWsp[1])-dLng);
                     
                     if(iMaxDiffLat < itLat) iMaxDiffLat = itLat; // iMaxDiffLat= max(iMaxDiffLat,itLat) roznica miedzy wartoscami
                     if(iMaxDiffLng < itLng) iMaxDiffLng = itLng;
                     }
                }
                 
                // konwersja odleglosci na zoom
                // zoom = 6 dla Paryz, Ams, Lond
                iZoom = 4;
                if(iMaxDiffLat < 4 && iMaxDiffLng<4) iZoom=6;
                if(iMaxDiffLat < 1 && iMaxDiffLng<1) iZoom=10;


                oMap = new google.maps.Map(document.getElementById('mapek'), { <!-- tworzymy obiekt ktory jest obietem Google Maps -->
                zoom: iZoom,
                zoomControl: true, mapTypeControl: true,
                center: pSrodek});
//            
//            streetViewControl:true,
//            mapTypeId:roadmap
//                });

                iCnt=0; // licznik punktów, punkty są w oddzielnych liniach, nie w każdej linii musi być punkt, licznik wystąpień na integer cnt / musisz wiedziec ile punktow masz doprzejscia, wiec musisz ja zliczyc

                for(i=0; i<aArr.length; i++)
                {
                    var sWsp = aArr[i]
                    var aWsp=sWsp.split(",")
                    if(aWsp.length==2)
                     {
                     itLat=parseFloat(aWsp[0]);
                     itLng=parseFloat(aWsp[1]);
                     
                     var sLabel="Punkt " + iCnt;
                     iCnt = iCnt+1;
                     var oTmp  = new google.maps.Marker({position: {lat: itLat, lng: itLng}, map: oMap, label: sLabel}); <!-- naniesienie kazdegopunktow, wszystkich az do koca tablicy -->
                     aPkt[iCnt] = oTmp;


                     }
                }

					

                iCurrCheckPoint = 1;
//                var marker = new google.maps.Marker({
//                position: pSrodek,
//                map: map
//                });
               }

               function sprawdzOdleglosc(lat1,lng1,lat2,lng2)  // This script calculates great-circle distances between the two points – that is, the shortest distance over the earth’s surface
               {
                var spZ = 6371e3; // Radius of the earth in metres - sredni! promien ziemi (R) , najkrotszy dystans
                var fi1 = lat1.toRadians(); // φ1 Fi
                var fi2 = lat2.toRadians(); // φ2 
                var dfi = (lat2-lat1).toRadians(); // Δφ - // Javascript functions in radians
                var delab = (lng2-lng1).toRadians(); // Δλ 

                var firsta = Math.sin(dfi/2) * Math.sin(dfi/2) + // a
                        Math.cos(fi1) * Math.cos(fi2) *
                        Math.sin(delab/2) * Math.sin(delab/2);
                var firstc = 2 * Math.atan2(Math.sqrt(firsta), Math.sqrt(1-firsta)); // c
                var firstd = spZ * firstc; // d -  Distance in km
                return firstd;
               }

               if(Number.prototype.toRadians===undefined) // Converts numeric degrees to radians
                {
                    Number.prototype.toRadians=function()
                    {
                    return this * Math.PI/180; // Math.PI/180 - Returns PI - to use half a circle to convert degrees around a circle.
                    };
                }

               function zrobCheck() { <!-- ffunkcja wywylujaca jak daleko jestesmy od punktu -->
                navigator.geolocation.getCurrentPosition(onGetLocSuccessCheckpoint); // odczytaj GPS When the position is determined, the defined callback function is executed. 
               }

               function onGetLocSuccessCheckpoint(position) { 
                   // Retrieve the location information from the position object
                   var latitude = position.coords.latitude;
                   var longitude = position.coords.longitude;
                   var iOdl=sprawdzOdleglosc(aPkt[iCurrCheckPoint].getPosition().lat(), aPkt[iCurrCheckPoint].getPosition().lng(),latitude,longitude);
                    // if(ok) zaliczPunkt (idz dalej)
                    if(iOdl<1000) // podwójny błąd GPS (4.9 m na otwartej przestrzeni)
					
                    {
						aPkt[iCurrCheckPoint].setMap(null); // usuwanie markera z mapy
                        delete aPkt[iCurrCheckPoint];
                        aPkt[iCurrCheckPoint] = null;
                        iCurrCheckPoint++;
                        if(iCurrCheckPoint > iMaxCheckPoint)
                        {// TODO do pozniejszej obslugi - odeslanie wynikow etc.
                            var sMsg = "You just complete Challenge!";
														//USUWANIE z localStorage
											localStorage.setItem('challenge', null);

                        }
                        else
                        {
                            var sMsg = "Ok, but this is not the end...";
                            // ustawienie center na wspolrzedne aktualne
                            oMap.setCenter({lat: latitude, lng: longitude });
                        }
                    }
                    else
                    {
                        // else alert(za daleko)
                    var sMsg = "Jestes " + Math.round(iOdl) + " metrów od celu"         // iOdl.toFixed()   zwraca liczbę bez części ułamkowej z zaokrągleniem
                    }
                    
                    alert(sMsg);
                
            }
        </script>
       <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBLSspr4Exszv9A-6pnfr2t39cojwjDvMA&callback=initMap"
  type="text/javascript"></script> <!-- incujnuje mapke na naszym kluczu -->
<!--
        <script async defer
            src="https://maps.googleapis.com/maps/api/js?callback=initMap">
        </script> -->

            <div data-role="page" data-dialog="true" id="dlgLista">
                <div id="divMain" data-role="dialog" class="ui-content">
                    <form>
                        <label for="punktyLista"><b>Paste the text challenge:</b></label>
                        <textarea id="punktyLista" name="punktyLista" required rows="6"></textarea>
                        <a href="#pageTake" class="ui-btn ui-btn-inline ui-corner-all ui-shadow ui-btn-b mc-top-margin-1-5" onclick="initMap()">Ok</a>
                        <a href="#pageMain" class="ui-btn ui-btn-inline ui-corner-all ui-shadow ui-btn-b mc-top-margin-1-5">Cancel</a>
                    </form>
                </div>
            </div>      <!-- wklejanie czelandza do okineka -->

            <div data-role="page" id="pageTake">
                <div data-role="header" class="header">
                    <h1 id="app-title">Challenge App</h1>
                </div>
                <div id="divMain" data-role="main" class="ui-content">
                    <div id="mapek" style="width: 95%; height: 500px"></div>
                    <form>
                    <a href="#pageTake" class="ui-btn ui-btn-inline ui-corner-all ui-shadow ui-btn-b mc-top-margin-1-5" onclick="initMap()">Show Map</a>
                    <a href="#pageTake" class="ui-btn ui-btn-inline ui-corner-all ui-shadow ui-btn-b mc-top-margin-1-5" onclick="zrobCheck()">Check point</a>
                    <a href="#pageMain" class="ui-btn ui-btn-inline ui-corner-all ui-shadow ui-btn-b mc-top-margin-1-5">Cancel</a> <!-- wczesniejszy div przenosi tutaj, widok z mapką -->
                    </form>
                </div>
                <footer data-role="footer" data-position="fixed">
                    <p>&copy; Ewa Kołodziejczyk Łukasz Kępa Kornel Kawulok 2017</p>
                </footer>
            </div>
</body >
</html >
